---
import Layout from "../layouts/Layout.astro";
import Nav from "../components/Nav.astro";
import Footer from "../components/Footer.astro";
import PageLayout from "../components/PageLayout.astro";
import { getDefaultPageSlugs, loadDefaultPage } from "../lib/loadPageContent";

export async function getStaticPaths() {
	// Discover pages from content files (works in CI; no Tina client required).
	const slugs = getDefaultPageSlugs();
	return slugs.map((slug) => ({
		params: { slug },
		props: { slug },
	}));
}

interface Props {
	slug: string;
}
const { slug } = Astro.props;
const { title, body } = loadDefaultPage(slug);
---

<Layout title={`${title} â€” Kairos Capital`}>
	<Nav />
	<main>
		<PageLayout title={title} body={body} />
	</main>
	<Footer />
</Layout>
